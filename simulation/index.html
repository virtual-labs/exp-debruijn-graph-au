<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genome Assembly Using De Bruijn Graphs</title>
    <link rel="stylesheet" href="styles.css">   
    <script src="script.js" defer></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.21.1/cytoscape.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/canvg/3.0.0/canvg.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<style>
/* General Styling */
body {
    font-family: 'Poppins', sans-serif;
    max-height: fit-content;
    background: #FAFAF9;
    transition: all 0.4s ease-in-out;
}
/* Main Container */
.container {
     margin: 20px auto;
     padding: 30px;
     background: #ffffff;
     border-radius: 15px;
     box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
     animation: fadeIn 1s ease-in-out;
     position: relative; /* Needed for absolute positioning */
    padding-top: 60px; /* Ensures space for logo */
 }

 /* üéì Logo - Fixed at the Top Left */
.logo {
    position: absolute;
    top: 20px; /* Moves it slightly lower */
    left: 20px;
    height: 50px;
    width: auto;
}
 
 
/* üèÜ Eye-Catching Heading */
h1 {
    font-size: 40px; /* Larger & More Impactful */
    color: #0a0d60; /* Deep Royal Blue for Authority */
    text-align: center;
    margin: 20px auto;
    text-transform: uppercase;
    letter-spacing: 2px;
    font-weight: 800;
    font-family: 'Poppins', sans-serif;
    text-shadow: 2px 2px 6px rgba(10, 13, 96, 0.3); /* Soft Glow Effect */
    position: relative;
    animation: fadeInUp 1s ease-in-out, pulseGlow 2.5s infinite alternate;
}

/* üé≠ Subtle Animated Underline */
h1::after {
    content: "";
    display: block;
    width: 80px;
    height: 4px;
    background: linear-gradient(90deg, #ff5733, #ffbd33); /* Vibrant Accent */
    margin: 10px auto 0;
    border-radius: 5px;
    animation: underlineSlide 1.5s ease-in-out;
}

/* üéûÔ∏è Smooth Entrance Animation */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* üí° Gentle Glow Effect */
@keyframes pulseGlow {
    from {
        text-shadow: 2px 2px 8px rgba(10, 13, 96, 0.5);
    }
    to {
        text-shadow: 3px 3px 12px rgba(10, 13, 96, 0.7);
    }
}

/* üîΩ Stylish Underline Entrance */
@keyframes underlineSlide {
    from {
        width: 0;
    }
    to {
        width: 80px;
    }
}


/* üìå Sleek & Compact Instruction Box */
.instruction-container {
    background: #f9fafc; /* Softer Light Grey */
    border-left: 4px solid #007bff; /* Professional Blue Accent */
    padding: 12px 18px; /* Reduced Padding */
    margin-bottom: 15px; /* Less Margin */
    border-radius: 6px; /* Slightly Rounded */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.12); /* Subtle Depth */
    max-width: 100%; /* Keeps it Proportionate */
    margin: 0 auto; /* Centers it */
}

/* üèÜ Instruction Heading */
.instruction-container h2 {
    color: #0056b3; /* Darker Blue for Contrast */
    font-size: 18px; /* Reduced Size */
    margin-bottom: 8px; /* Reduced Gap */
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* üìú Ordered List Formatting */
.instruction-container ol {
    padding-left: 18px; /* Adjusted Spacing */
}

/* üîπ Instruction Points */
.instruction-container li {
    margin-bottom: 4px;
    font-size: 14px; /* Reduced Size */
    line-height: 1.4; /* Improved Readability */
    color: #333; /* Dark Grey for Better Contrast */
}

/* ‚úçÔ∏è Additional Notes */
.instruction-container p {
    font-size: 13px; /* Smaller & Subtle */
    font-style: italic;
    color: #555;
    margin-top: 8px;
}


 /* DNA Input */
 textarea {
     width: 100%;
     height: 150px;
     padding: 15px;
     border: 2px solid #ddd;
     border-radius: 10px;
     font-size: 16px;
     transition: all 0.3s ease;
     box-shadow: 0 2px 7px rgba(0, 0, 0, 0.1);
     background: #F8FAFC;
     font-family: 'Poppins', sans-serif;
     text-align: justify;
 }
 
 textarea:focus {
     border-color:#3D5AFE;
     outline: none;
     box-shadow: 0px 0px 15px rgba(37, 99, 235, 0.3);
 }
 
 /* File Upload & FASTA Download Section */
 .file-section {
     display: flex;
     align-items: center;
     justify-content: flex-start; /* Ensures elements are aligned in a row */
     gap: 20px;
     margin-top: 15px;
     padding: 10px;
     background: #ffffff;
     border-radius: 12px;
     box-shadow: 0 5px 12px rgba(0, 0, 0, 0.12);
     position: relative;
     width: 100%;
     flex-wrap: wrap;
 }
 
 /* File Upload Styling */
 .file-upload {
     display: flex;
     flex-direction: column;
     align-items: flex-start;
 }
 
 /* Customize "Choose File" Button - Smaller Size */
input[type="file"]::-webkit-file-upload-button {
    background: #007bff ; /* Blue gradient */
    color: white;
    border: none;
    padding: 8px 12px; /* Reduced padding */
    font-size: 14px; /* Smaller text size */
    font-weight: bold;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
}

/* Hover effect */
input[type="file"]::-webkit-file-upload-button:hover {
    background: #007bff; /* Darker blue */
    transform: scale(1.05);
}

/* File input container */
.file-upload {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    width: 100%;
}

 /* Customize File Input */
 input[type="file"] {
     font-size: 16px;
     cursor: pointer;
 }
 
 /* FASTA Download Link */
 #downloadSample {
     text-decoration: underline;
     color: #007bff;
     cursor: pointer;
     font-size: 16px;
     transition: color 0.3s, transform 0.2s;
     font-family: 'Poppins', sans-serif;
     margin-left: -20px;
 }
 
 #downloadSample:hover {
     color: #0056b3;
     transform: scale(1.1);
 }
 
 /* Ensure alignment in the file section */
.file-section {
    display: flex;
    align-items: center;
    gap: 10px; /* Adds spacing between file input and link */
}

 input[type="file"] {
     padding: 5px;
 }
 
 /* K-mer Box */
 .kmer-box {
     background: #DCE6FF;
     padding: 6px 12px;
     border-radius: 6px;
     font-size: 15px;
     font-weight: bold;
     display: flex;
     align-items: center;
     gap: 6px;
     border: 1px solid #3D5AFE;
     margin-left: auto; /* Push k-mer box to the right */
     white-space: nowrap;
     font-family: 'Poppins', sans-serif;
 }
 
 .kmer-box input {
     width: 30px;
     font-size: 15px;
     text-align: center;
     border: none;
     background: white;
     border-radius: 4px;
     outline: none;
     padding: 3px;
 }
 
 
/* üîπ Common Button Styling */
.button-group {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 25px;
}

/* üîπ Universal Button Design */
button {
    padding: 14px 28px;
    font-size: 16px;
    font-weight: bold;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.3s, background 0.3s, box-shadow 0.3s;
    font-family: 'Poppins', sans-serif;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
}

/* üéØ Hover Effect - Smooth Scaling & Shadow */
button:hover {
    transform: scale(1.05);
    opacity: 0.9;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
}

/* üéØ Active Click Effect */
button:active {
    transform: scale(0.97);
    opacity: 0.85;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
}

/* üîò Universal Step Buttons */
.step-button {
    display: inline-block;
    padding: 14px 20px;
    font-size: 1.2em;
    font-weight: bold;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
    min-width: 220px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

/* üü† Button Colors */
.generate-btn { background: linear-gradient(135deg, #2563EB, #1E3A8A); } /* Generate K-mers */
.only-kmers-btn { background: linear-gradient(135deg,  #2563EB, #1E3A8A); } /* Show only K-mers */
.construct-graph-btn { background: linear-gradient(135deg,  #2563EB, #1E3A8A); } /* Visualize Graph */

/* üöÄ Hover Effects */
.step-button:hover {
    transform: scale(1.07);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    opacity: 0.9;
}

/* üéØ Active Click Effect */
.step-button:active {
    transform: scale(0.95);
    opacity: 0.8;
}

/* üéØ Unique Button Colors */
.reset-btn { background: linear-gradient(135deg, #dc3545, #a71e2f); } /* Red */
.reset-btn:hover { background: linear-gradient(135deg, #c82333, #891628); }

.start-analysis-btn { background: linear-gradient(135deg, #007bff, #0056b3); } /* Blue */
.start-analysis-btn:hover { background: linear-gradient(135deg, #0069d9, #004899); }

.graph-generation-btn { background: linear-gradient(135deg, #0056b3, #003f7f); } /* Dark Blue */
.graph-generation-btn:hover { background: linear-gradient(135deg, #004a99, #003566); }

/* Button Click Effect */
.step-button:active {
    transform: scale(0.97);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}
/* üéØ Start Analysis Button - Blue */
.start-analysis-btn {
    background: linear-gradient(135deg, #007bff, #0056b3) !important;
    color: white !important;
}

/* üéØ Generate Graph Button - Darker Blue */
.graph-generation-btn {
    background: linear-gradient(135deg, #0056b3, #003f7f) !important;
    color: white !important;
}

/* Main Container: Holds Explanation*/
.analysis-graph-container {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin-top: 20px;
    padding: 10px;
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
    max-height: fit-content;
}
/* Explanation Text */
p, li {
    font-size: 16px;
    line-height: 1.6;
    text-align: justify;
    color: #333;
    font-family: 'Poppins', sans-serif;
}

.explanation-box {
    flex: 1;
    background: #e0f7fa; /* Light Cyan */
    padding: 15px;
    border-radius: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    font-size: 14px;
    text-align: justify;
    max-height: 500px;
    overflow-y: auto;
    font-family: 'Poppins', sans-serif;
}

/* Step Analysis Container */
.step-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    max-width: 95%;
    margin: 20px auto;
}

/* Individual Step Boxes */
.step-box {
    width: 80%;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
    background: linear-gradient(135deg, #F0F8FF, #e3e3fb); /* Soft gradient */
    text-align: center;
    font-family: 'Poppins', sans-serif;
    border: 3px solid #0a0d60;
    max-height: 500px auto;
    overflow-y: auto;
    transition: all 0.4s ease-in-out, transform 0.3s;
    animation: fadeInUp 0.6s ease-in-out;
}

/* Scrollable Inner Box */
.scrollable-sequence-box {
    max-height: 100px;  /* Limit height */
    overflow-y: auto;   /* Enable scrolling */
    padding: 10px;
    border: 2px solid #0a0d60;
    border-radius: 6px;
    background: #ffffff;
    text-align: left;
}

/* Ensure DNA sequence wraps properly */
#dnaSequence {
    word-wrap: break-word;
    overflow-wrap: break-word;
    white-space: pre-wrap;
    max-width: 100%;
}

/* Nucleotide Colors */
.nucleotide-A { color: green; font-weight: bold; }
.nucleotide-T { color: red; font-weight: bold; }
.nucleotide-G { color: black; font-weight: bold; }
.nucleotide-C { color: blue; font-weight: bold; }

/* K-mer Buttons */
.kmer-button {
    display: inline-block;
    padding: 8px 12px;
    margin: 5px;
    font-size: 14px;
    font-weight: bold;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: transform 0.3s, box-shadow 0.3s;
    background: linear-gradient(135deg, #2563EB, #1E3A8A);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.kmer-button:hover {
    transform: scale(1.1);
    background: linear-gradient(135deg, #1E40AF, #1E3A8A);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

/* Highlight Graph Nodes */
.highlight-node {
    background-color: yellow !important;
    border: 3px solid red !important;
}



/* üåü Enhanced Styling for Step 2 */
#step2 {
    background: linear-gradient(135deg, #feeee1, #fce6c7); /* Soft peach to light apricot */
    border-radius: 10px;
    padding: 20px;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
    max-height: fit-content;
    text-align: center;
}

.kmer-info {
    font-size: 1.1em;
    font-weight: bold;
    color: #444;
    margin-bottom: 15px;
}

.scrollable-box.styled-box {
    background-color: white;
    border-left: 4px solid #ff9800;
    padding: 15px;
    font-size: 1.2em;
    text-align: left;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 400px; /* Only inner content scrolls */
    overflow-y: auto; /* Enables scrolling for content */
    box-shadow: inset 0px 0px 5px rgba(0, 0, 0, 0.2);
}

/* üåø Nucleotide Colors */
.nucleotide-A { color: green; font-weight: bold; }
.nucleotide-T { color: red; font-weight: bold; }
.nucleotide-G { color: black; font-weight: bold; }
.nucleotide-C { color: blue; font-weight: bold; }

.kmer-button {
    background-color: #ff9800;
    color: white;
    font-size: 1.1em;
    font-weight: bold;
    padding: 12px 18px;
    border-radius: 8px;
    transition: 0.3s;
}

.kmer-button:hover {
    background-color: #e65100;
    transform: scale(1.05);
}

/* üåü Step 3: Stable Outer Box */
#step3 {
    border: 3px solid #202f21;  /* Elegant Blue Border */
    background: linear-gradient(135deg, #f9fbe7, #e7f4c6); /* Light pastel greenish-yellow gradient */
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    max-height: 600px; /* Keeps outer box stable */
    box-shadow: 0px 5px 12px rgba(0, 0, 0, 0.2);
    overflow: hidden; /* Prevents scrolling on the outer box */
}

/* üéØ Step Description */
.step-description {
    font-size: 1.3em;
    color: #222;
    margin-bottom: 18px;
    font-weight: bold;
}

/* üîΩ Scrollable Inner Box for K-mers */
.scrollable-kmer-container {
    max-height: 350px; /* Adjust height within Step 3 */
    overflow-y: auto;  /* Enables scrolling */
    padding: 15px;
    background: #fff;
    border-radius: 8px;
    box-shadow: inset 0px 0px 6px rgba(0, 0, 0, 0.15);
}

/* üéØ K-mer Button Container */
.kmer-button-container {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
}

/* üü¢üî¥‚ö´üîµ Multi-Color K-mer Buttons */
.kmer-button {
    border: 2px solid #333;  /* Standard Border */
    color: #FFF;
    padding: 14px 22px;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.3s ease-in-out;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.15);
    min-width: 120px; /* Ensures all buttons have the same size */
    text-align: center;
}

/* üé® Assigning Different Colors to K-mers */
.kmer-button:nth-child(4n+1) { background: #28A745; } /* Green */
.kmer-button:nth-child(4n+2) { background: #DC3545; } /* Red */
.kmer-button:nth-child(4n+3) { background: #343A40; } /* Black */
.kmer-button:nth-child(4n) { background: #007BFF; } /* Blue */

/* üî• Interactive Hover Effect */
.kmer-button:hover {
    opacity: 0.85;
    transform: translateY(-2px) scale(1.1);
    box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.3);
}

/* üöÄ Active Click Effect */
.kmer-button:active {
    transform: scale(0.95);
    opacity: 0.9;
}


/* üåü Step 4: Graph Construct Styling */
#step4 {
    border: 4px solid #745c92;  /* Deep Purple Border */
    background: linear-gradient(135deg, #E8DAFF, #eee5fb); /* Soft Lavender Gradient */
    padding: 30px;
    border-radius: 15px;
    text-align: center;
    max-height: 600px; /* Keeps outer box stable */
    overflow: hidden; /* Prevents scrolling on the outer box */
    box-shadow: 0px 6px 14px rgba(0, 0, 0, 0.25);
}

/* üìú Scrollable Inner Graph Box */
.scrollable-graph-container {
    max-height: 350px; /* Allows inner scrolling */
    overflow-y: auto;
    padding: 15px;
    background: #FFF;
    border-radius: 10px;
    box-shadow: inset 0px 0px 6px rgba(0, 0, 0, 0.15);
    margin-bottom: 15px;
}


/* üèóÔ∏è Graph Construct Container */
.graph-construct {
    font-size: 1.3em;
    font-family: 'Courier New', monospace;
    color: #222;
    background: #FFF;
    border-left: 5px solid #009688; /* Highlighted Graph Structure */
    padding: 15px;
    text-align: left;
    border-radius: 10px;
    max-width: 80%;
    margin: 0 auto;
    line-height: 1.6;
}

/* üîπ Node Name */
.node {
    font-weight: bold;
    color: #00796B;  /* Deep Teal */
}

/* üîó Connection Arrows */
.arrow {
    font-size: 1.3em;
    color: #004D40;  /* Dark Green */
}

/* ‚úçÔ∏è Instructions Text */
.instruction-text {
    font-size: 1.2em;
    font-style: italic;
    color: #37474F;  /* Cool Dark Grey */
    margin-bottom: 20px;
}

/* üé® Colored Nucleotides */
.nucleotide-A { color: green; font-weight: bold; }
.nucleotide-T { color: red; font-weight: bold; }
.nucleotide-G { color: black; font-weight: bold; }
.nucleotide-C { color: blue; font-weight: bold; }



/* Fade In Animation */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
    
/* Unified Graph Container (Full Width) */
#genomegraphContainer {
    width: 100%;
    max-width: 100%;
    height: 100vh; /* Uses full screen height */
    margin: 0;
    padding: 0;
    background: #ffffff;
    border: none;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Maximized Graph Display Area */
#graphContainer {
    width: 100%;
    height: 96%;
    border: none;
    background: white;
    border-radius: 8px;
}



/* Graph Control Buttons */
.graph-controls {
    margin-bottom: 10px;
}

.graph-controls button {
    padding: 8px 12px;
    margin: 5px;
    font-size: 14px;
    font-weight: bold;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: 0.3s ease;
    background: linear-gradient(135deg, #4c51bf, #3b82f6);
    color: white;
}

.graph-controls button:hover {
    transform: scale(1.05);
    background: linear-gradient(135deg, #3b82f6, #2563eb);
}

.graph-controls button:active {
    transform: scale(0.95);
    background: linear-gradient(135deg, #2563eb, #1d4ed8);

}

.hidden {
    display: none !important;
}

/* üîπ Styling for Export Button */
.export-container {
    position: relative;
    display: inline-block;
}

.export-btn {
    background-color: #4CAF50;
    color: white;
    padding: 12px 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
    border-radius: 5px;
}

/* üîπ Dropdown Styling */
.export-dropdown {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 250px;
    box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    overflow: hidden;
    z-index: 1000;
}

/* üîπ Updated Dropdown Button Styling */
.export-dropdown button {
    width: 100%;
    padding: 12px;
    border: none;
    text-align: left;
    background-color: #e8f5e9;  /* Light green for better visibility */
    cursor: pointer;
    font-size: 14px;
    color: #333;
    transition: background 0.3s ease-in-out;
}

.export-dropdown button:hover {
    background-color: #c8e6c9;  /* Darker green on hover */
}

/* üîπ Display Dropdown on Hover */
.export-container:hover .export-dropdown {
    display: block;
}

 
 /* Animations */
 @keyframes fadeIn {
     from {
         opacity: 0;
         transform: translateY(-20px);
     }
     to {
         opacity: 1;
         transform: translateY(0);
     }
 }
 
 @keyframes slideDown {
     from {
         opacity: 0;
         transform: translateY(-30px);
     }
     to {
         opacity: 1;
         transform: translateY(0);
     }
 }
 
 /* Responsive Design */
 @media (max-width: 768px) {
     .container {
         max-width: 95%;
     }
 
     .file-section {
         flex-direction: column;
         align-items: center;
     }
 
     .file-section a,
     .file-section input {
         margin-bottom: 10px;
     }
 
     .button-group {
         flex-direction: column;
         gap: 12px;
     }
 
     .structure-btn {
         width: 80%;
     }
 }
 
 </style>
 
 
<body>
      <div class="container">
          <img src="https://webfiles.amrita.edu/2024/07/logo-branding-amrita-universiy-2024.png" alt="Amrita University Logo" class="logo">
        <h1>Genome Assembly Using De Bruijn Graphs</h1>

        <div id="userInstructions" class="instruction-container">
            <h2>üìñ How to Use the De Bruijn Graph Analyzer</h2>
            <p>Follow these steps to construct and analyze a De Bruijn Graph:</p>
            
            <ol>
                <li><strong>Enter the Input Sequence:</strong> Type or upload a DNA sequence to analyze.</li>
                <li><strong>Set k-mer Value:</strong> Choose the k-mer size (default is 3) for graph construction.</li>
                <li><strong>Start Analysis:</strong> Click "Start Analysis" to generate k-mers and nodes.</li>
                <li><strong>View K-mers:</strong> Observe the generated k-mers and their prefixes/suffixes.</li>
                <li><strong>Generate Graph:</strong> Click on "Generate Graph" to visualize the De Bruijn Graph.</li>
                <li><strong>Step-wise Simulation:</strong> View the construction process step-by-step. </li>
                <li><strong>Export Results:</strong> Download stepwise details(.txt) or graph image(.jpg). Graph image can also be downloaded after untangling or highlighting the graph.</li>
                <li><strong>View Graph:</strong> Click "View Graph" to visualize the De Bruijn Graph.</li>
                <li><strong>Reset:</strong> Click "Reset" to clear inputs and start fresh.</li>
            </ol>
        
            <p><strong>Note:</strong> Ensure that your sequence is valid and the k-mer size is appropriate.</p>
        </div>

        <!-- Sequence Input Section -->
        <textarea id="sequenceInput" placeholder="Enter DNA sequence"></textarea>

          <!-- K-mer Input Box -->
          <div class="kmer-box">
             <label for="kmerInput">K-mer Size:</label>
             <input type="number" id="kmerInput" value="3" min="1" max="10">
      </div>

      <div class="file-section">
        <!-- File Upload (Left Side) -->
        <input type="file" id="fileUpload" onchange="uploadFile()">
        <!-- FASTA Download (Right Side) -->
        <a href="#" id="downloadSample" onclick="downloadSample()">Download Sample FASTA</a>
    </div>

        <!-- Buttons Section -->
        <div class="button-group">
            <button class="step-button start-analysis-btn" onclick="showStep(1)">Start Analysis</button>
            <button class="step-button graph-generation-btn"onclick="generateGraph()">Generate Graph</button>
            <button class="step-button reset-btn" onclick="resetPage()">üîÑ Reset</button>

   <!-- Export Result Button with Dropdown -->
    <div class="export-container">
        <button class="export-btn" onclick="toggleDropdown()">Export Result ‚ñº</button>
        <div class="export-dropdown">
            <button onclick="exportStepwiseGraph()('steps')">üìÑ Step-wise Construction (TXT)</button>
            <button onclick="downloadGraphAsImage()">üñºÔ∏è Download Graph (JPG)</button>
        </div>
    </div> 

        </div>

        <!-- Step-by-Step Analysis & Graph Section -->
<div class="analysis-graph-container">
    <div class="explanation-box">
        <h3>Understanding De Bruijn Graphs</h3>
        <p><strong>üîπ Nodes:</strong> Each node represents a k-1 sequence (prefix/suffix of k-mers).</p>
        <p><strong>üîπ Edges:</strong> Show transitions from one k-1 sequence to another using k-mers.</p>
        <p>The goal of a De Bruijn Graph is to reconstruct the original sequence by connecting overlapping k-mers.</p>
    </div>
</div>


<!-- Step Analysis Container -->
<div class="step-container">

    <!-- Step 1: Input Details -->
<div id="step1" class="step-box">
    <h3>üì• Step 1: Input Details</h3>
    <div class="input-details">
        <p><strong>üß¨ Entered Nucleotide Sequence:</strong></p>

        <!-- Scrollable Inner Container -->
        <div class="scrollable-sequence-box">
            <p id="dnaSequence" class="sequence-display"></p>
        </div>

        <p><strong>üî¢ Selected K-mer Size:</strong> <span id="selectedKmer"></span></p>
        <p><strong>üìè Sequence Length:</strong> <span id="sequenceLength"></span> bases</p>
        <p><strong>üîó Number of K-mers Formed:</strong> <span id="numKmers"></span></p>
        <p><strong>üåÄ Number of Nodes Formed:</strong> <span id="numNodes"></span></p>
    </div>
    <button class="step-button generate-btn" onclick="showStep(2)">üõ†Ô∏è Generate K-mers</button>
</div>

 <!-- Step 2: K-mer Generation (with Prefix & Suffix) -->
<div id="step2" class="step-box hidden">
    <h3>üß¨ Step 2: K-mer Generation</h3>
    <p class="kmer-info">
        Each K-mer is extracted from the sequence. The <strong>prefix</strong> is the first K-1 characters, 
        and the <strong>suffix</strong> is the last K-1 characters.
    </p>
    <div id="kmerOutput" class="scrollable-box styled-box"></div>
    <div>
        <button class="step-button only-kmers-btn" onclick="showStep(3)">üî¨ Show only K-mers</button>
    </div>
</div>


    <!-- Step 3: Only K-mers as Buttons -->
<div id="step3" class="step-box hidden">
    <h3>üî¢ Step 3: K-mers</h3>
     <p class="instruction-text">These are all the possible generated k-mers(edges):</p>

     <div class="scrollable-kmer-container">
      <div id="kmerButtons" class="kmer-button-container"></div>
</div>
<button class="step-button only-kmers-btn" onclick="showStep(4)">üìà Show Graph Construct</button>
</div>

<!-- Step 4: Graph Adjacency List -->
<div id="step4" class="step-box hidden">
    <h3>üîó Step 4: Graph Construct</h3>
    <p class="instruction-text">Each node (k-1 mer) is connected to its next possible nodes:</p>

    <div class="scrollable-graph-container">
        <p id="graphOutput" class="graph-construct"></p></div>

        <button class="step-button construct-graph-btn" onclick="generateGraph()">üîó Visualise Graph</button>
</div>


</div>

        <!-- Graph Visualization Section -->
<div id="genomegraphContainer" style="display: none;">
     <!-- Graph Controls -->
     <div class="graph-controls">
        <button onclick="generateGraph()">Rearrange Graph</button>
    </div>

    <!-- Graph Display Area -->
    <div id="graphContainer"></div>
</div>
        
    </div>
       <!-- Include Cytoscape -->
       <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.21.1/cytoscape.min.js"></script>
       <script src="script.js"></script>
<script src="../assets/js/iframeResize.js"></script>
        
        </body>
</html>

<script>
function resetPage() {
    location.reload();  // ‚úÖ Reloads the page, restoring it to its initial state
}

function downloadSample() {
    const fastaContent = ">sample\nATGAGCTACGATGCATCATGATACGCGTCGACCACCGCGCGGCTTGTG"; // Ensure proper FASTA format
    const blob = new Blob([fastaContent], { type: 'text/plain' }); // Create a Blob
    const element = document.createElement('a'); // Create anchor element

    element.href = URL.createObjectURL(blob);
    element.download = "sample.fasta"; // Set the filename
    document.body.appendChild(element); // Append to DOM
    element.click(); // Trigger the download
    document.body.removeChild(element); // Clean up
    URL.revokeObjectURL(element.href); // Free memory
}


function uploadFile() {
    const file = document.getElementById('fileUpload').files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(event) {
        const lines = event.target.result.split('\n');
        
        let sequence = lines.filter(line => line && !line.startsWith(">")).join("");

        document.getElementById("sequenceInput").value = sequence || "";
    };
    
    reader.readAsText(file);
}

function showStep(step) {
    if (step === 1) {
    let sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    let kmerSize = parseInt(document.getElementById("kmerInput").value);
    
    if (!sequence) {
        alert("‚ùå Please enter a DNA sequence.");
        return;
    }

    let coloredSequence = sequence.replace(/A/g, '<span class="nucleotide-A">A</span>')
                                  .replace(/T/g, '<span class="nucleotide-T">T</span>')
                                  .replace(/G/g, '<span class="nucleotide-G">G</span>')
                                  .replace(/C/g, '<span class="nucleotide-C">C</span>');

    document.getElementById("dnaSequence").innerHTML = coloredSequence;
    document.getElementById("selectedKmer").textContent = kmerSize;
    document.getElementById("sequenceLength").textContent = sequence.length;
    document.getElementById("numKmers").textContent = sequence.length - kmerSize + 1;

    // ‚úÖ Calculate Unique (k-1)-mers for Nodes
    let nodes = new Set();
    for (let i = 0; i <= sequence.length - kmerSize; i++) {
        let kmer = sequence.substring(i, i + kmerSize);
        let prefix = kmer.slice(0, -1);  // First k-1 bases
        let suffix = kmer.slice(1);      // Last k-1 bases
        nodes.add(prefix);
        nodes.add(suffix);
    }

    document.getElementById("numNodes").textContent = nodes.size;  // Display unique node count

    document.getElementById("step1").classList.remove("hidden");
}

    if (step === 2) {
    let sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    let k = parseInt(document.getElementById("kmerInput").value);
    let kmerResults = document.getElementById("kmerOutput");

    kmerResults.innerHTML = "<h4>Generated K-mers:</h4>";

    for (let i = 0; i <= sequence.length - k; i++) {
        let kmer = sequence.substring(i, i + k);
        let prefix = kmer.slice(0, -1);
        let suffix = kmer.slice(1);

        // üåø Apply Colors to Nucleotides
        let coloredKmer = kmer.replace(/A/g, '<span class="nucleotide-A">A</span>')
                              .replace(/T/g, '<span class="nucleotide-T">T</span>')
                              .replace(/G/g, '<span class="nucleotide-G">G</span>')
                              .replace(/C/g, '<span class="nucleotide-C">C</span>');

        let coloredPrefix = prefix.replace(/A/g, '<span class="nucleotide-A">A</span>')
                                  .replace(/T/g, '<span class="nucleotide-T">T</span>')
                                  .replace(/G/g, '<span class="nucleotide-G">G</span>')
                                  .replace(/C/g, '<span class="nucleotide-C">C</span>');

        let coloredSuffix = suffix.replace(/A/g, '<span class="nucleotide-A">A</span>')
                                  .replace(/T/g, '<span class="nucleotide-T">T</span>')
                                  .replace(/G/g, '<span class="nucleotide-G">G</span>')
                                  .replace(/C/g, '<span class="nucleotide-C">C</span>');

        kmerResults.innerHTML += `<p>
            K-mer: <strong>${coloredKmer}</strong> ‚Üí 
            Prefix: <strong>${coloredPrefix}</strong>, 
            Suffix: <strong>${coloredSuffix}</strong>
        </p>`;
    }

    document.getElementById("step2").classList.remove("hidden");
}


let graphGenerated = false;  // Track if the graph is generated

if (step === 3) {
    let sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    let k = parseInt(document.getElementById("kmerInput").value);
    let kmerOutput = document.getElementById("kmerButtons");

    for (let i = 0; i <= sequence.length - k; i++) {
        let kmer = sequence.substring(i, i + k);
        kmerOutput.innerHTML += `<button class="kmer-button" onclick="highlightKmer('${kmer}')">${kmer}</button>`;
    }

    document.getElementById("step3").classList.remove("hidden");
}

function highlightKmer(kmer) {
    if (!graphGenerated) {
        alert("‚ö†Ô∏è Graph not yet generated!");
        return;
    }

    cy.elements().removeClass("highlight-node");  // Remove previous highlights
    cy.elements(`[label="${kmer}"]`).addClass("highlight-node");  // Highlight selected K-mer
}


if (step === 4) {
    let sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    let k = parseInt(document.getElementById("kmerInput").value);
    let adjacencyList = {};
    let graphDisplay = document.getElementById("graphOutput");

    // Constructing adjacency list
    for (let i = 0; i <= sequence.length - k; i++) {
        let kmer = sequence.substring(i, i + k);
        let prefix = kmer.slice(0, -1);
        let suffix = kmer.slice(1);

        if (!adjacencyList[prefix]) {
            adjacencyList[prefix] = [];
        }
        adjacencyList[prefix].push(suffix);
    }

    // Function to colorize nucleotides
    function colorizeSequence(seq) {
        return seq
            .replace(/A/g, '<span style="color: green; font-weight: bold; font-family: Arial, sans-serif;">A</span>')
            .replace(/T/g, '<span style="color: red; font-weight: bold; font-family: Arial, sans-serif;">T</span>')
            .replace(/G/g, '<span style="color: black; font-weight: bold; font-family: Arial, sans-serif;">G</span>')
            .replace(/C/g, '<span style="color: blue; font-weight: bold; font-family: Arial, sans-serif;">C</span>');
    }

    // Beautify adjacency list output with colors and font style
    let formattedOutput = "<strong style='font-family: Arial, sans-serif;'>Adjacency List:</strong><br>";
    for (let node in adjacencyList) {
        let coloredNode = colorizeSequence(node);
        let coloredSuffixes = adjacencyList[node].map(colorizeSequence).join(", ");
        formattedOutput += `<span style="color: #d32f2f; font-weight: bold; font-family: Arial, sans-serif;">${coloredNode}</span> ‚Üí <span style="color: #388e3c; font-family: Arial, sans-serif;">[${coloredSuffixes}]</span><br>`;
    }

    graphDisplay.innerHTML = formattedOutput;

    // SHOW ONLY the adjacency list‚ÄîNO GRAPH GENERATION YET
    document.getElementById("step4").classList.remove("hidden");
}

// üî• Generate Graph when clicking "Generate Graph" button in Step 4
function finalizeLayout() {
    document.getElementById("container").classList.add("grid-layout");
    generateGraph();
}

// üéØ Highlight k-mer on interaction
function highlightKmer(kmer) {
    cy.elements().removeClass("highlight-node");
    cy.elements(`[label="${kmer}"]`).addClass("highlight-node");
}

// Function to generate K-mers with Prefix & Suffix in Step 2
function generateKmers() {
    let sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    let k = parseInt(document.getElementById("kmerInput").value);
    let kmerOutput = document.getElementById("kmerOutput");

    if (!sequence || isNaN(k) || k <= 0 || k > sequence.length) {
        alert("Invalid input. Please enter a valid DNA sequence and K-mer size.");
        return;
    }

    kmerOutput.innerHTML = "<h4 style='font-family: Arial, sans-serif;'>Generated K-mers:</h4>";

    for (let i = 0; i <= sequence.length - k; i++) {
        let kmer = sequence.substring(i, i + k);
        let prefix = kmer.slice(0, -1);
        let suffix = kmer.slice(1);

        kmerOutput.innerHTML += `<p style="font-family: Arial, sans-serif;">K-mer: <strong>${colorizeSequence(kmer)}</strong> ‚Üí Prefix: <strong>${colorizeSequence(prefix)}</strong>, Suffix: <strong>${colorizeSequence(suffix)}</strong></p>`;
    }
}

// Function to generate buttons for each K-mer in Step 3
function generateKmerButtons() {
    let sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    let k = parseInt(document.getElementById("kmerInput").value);
    let kmerButtons = document.getElementById("kmerButtons");

    if (!sequence || isNaN(k) || k <= 0 || k > sequence.length) {
        alert("Invalid input. Please enter a valid DNA sequence and K-mer size.");
        return;
    }

    kmerButtons.innerHTML = "<h4 style='font-family: Arial, sans-serif;'>Select a K-mer:</h4>";

    for (let i = 0; i <= sequence.length - k; i++) {
        let kmer = sequence.substring(i, i + k);
        kmerButtons.innerHTML += `<button class="kmer-button" onclick="highlightKmer('${kmer}')" style="font-family: Arial, sans-serif;">${colorizeSequence(kmer)}</button>`;
    }
}

// Function to generate De Bruijn graph in Step 4
function generateGraph() {
    let sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    let k = parseInt(document.getElementById("kmerInput").value);
    let adjacencyList = {};
    let graphOutput = document.getElementById("graphOutput");

    if (!sequence || isNaN(k) || k <= 0 || k > sequence.length) {
        alert("Invalid input. Please enter a valid DNA sequence and K-mer size.");
        return;
    }

    for (let i = 0; i <= sequence.length - k; i++) {
        let kmer = sequence.substring(i, i + k);
        let prefix = kmer.slice(0, -1);
        let suffix = kmer.slice(1);

        if (!adjacencyList[prefix]) {
            adjacencyList[prefix] = [];
        }
        adjacencyList[prefix].push(suffix);
    }

    graphOutput.innerHTML = "<h4 style='font-family: Arial, sans-serif;'>De Bruijn Graph (Adjacency List):</h4><pre style='font-family: Arial, sans-serif;'>" + JSON.stringify(adjacencyList, null, 2) + "</pre>";
}

function highlightKmer(kmer) {
    alert(`You selected: ${kmer}`);
}

}

function toggleDropdown() {
    const dropdown = document.querySelector('.export-dropdown');
    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
}
    steps.push(step);
    currentStep = step;
    document.querySelectorAll('.step-box').forEach(box => box.classList.add('hidden'));
    document.getElementById(`step${step}`).classList.remove('hidden');
    document.getElementById("genomegraphContainer").classList.add("hidden"); // Hide graph container when navigating steps
    document.getElementById("graphContainer").innerHTML = ""; // Clear graph container when navigating steps

function generateGraph() {
    const sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    const k = parseInt(document.getElementById("kmerInput").value);
    if (!sequence) {
        alert("Please enter a DNA sequence.");
        return;
    }
    if (k <= 0) {
        alert("K-mer size must be greater than 0.");
        return;
    }

    const elements = [];
    const nodesSet = new Set();
    const edges = [];

    const nodeColors = ["#FF5733", "#33FF57", "#3357FF", "#FF33A1", "#A133FF", "#33FFF5", "#F5A623", "#7D3C98"];
    const edgeColors = ["#2ECC71", "#3498DB", "#9B59B6", "#F1C40F", "#1ABC9C", "#D35400", "#8E44AD"];
    
    let nodeColorIndex = 0;
    let edgeColorIndex = 0;

    for (let i = 0; i <= sequence.length - k; i++) {
        const kmer = sequence.substring(i, i + k);
        const prefix = kmer.slice(0, -1);
        const suffix = kmer.slice(1);

        nodesSet.add(prefix);
        nodesSet.add(suffix);
        edges.push({ data: { id: `${prefix}-${suffix}`, source: prefix, target: suffix, label: kmer, color: edgeColors[edgeColorIndex % edgeColors.length] } });
        edgeColorIndex++;
    }

    nodesSet.forEach(node => {
        elements.push({ data: { id: node, label: node, color: nodeColors[nodeColorIndex % nodeColors.length] } });
        nodeColorIndex++;
    });
    elements.push(...edges);

    function generateGraph() {
    const sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    const k = parseInt(document.getElementById("kmerInput").value);
    
    if (!sequence) {
        alert("Please enter a DNA sequence.");
        return;
    }
    if (k <= 0) {
        alert("K-mer size must be greater than 0.");
        return;
    }

    const elements = [];
    const nodesSet = new Set();
    const edges = [];

    const nodeColors = ["#FF5733", "#33FF57", "#3357FF", "#FF33A1", "#A133FF", "#33FFF5", "#F5A623", "#7D3C98"];
    const edgeColors = ["#2ECC71", "#3498DB", "#9B59B6", "#F1C40F", "#1ABC9C", "#D35400", "#8E44AD"];
    
    let nodeColorIndex = 0;
    let edgeColorIndex = 0;

    for (let i = 0; i <= sequence.length - k; i++) {
        const kmer = sequence.substring(i, i + k);
        const prefix = kmer.slice(0, -1);
        const suffix = kmer.slice(1);

        nodesSet.add(prefix);
        nodesSet.add(suffix);
        edges.push({ data: { id: `${prefix}-${suffix}`, source: prefix, target: suffix, label: kmer, color: edgeColors[edgeColorIndex % edgeColors.length] } });
        edgeColorIndex++;
    }

    nodesSet.forEach(node => {
        elements.push({ data: { id: node, label: node, color: nodeColors[nodeColorIndex % nodeColors.length] } });
        nodeColorIndex++;
    });

    elements.push(...edges);

    // üîπ Show the graph container before drawing
    showGraph();

    // üîπ Draw the graph
    drawGraphCytoscape(elements);
}

// Function to Show the Graph Container
function showGraph() {
    let graphContainer = document.getElementById("genomegraphContainer");
    graphContainer.style.display = "flex"; // Make it visible
}

// Function to Hide the Graph Container (Call this if needed)
function hideGraph() {
    let graphContainer = document.getElementById("genomegraphContainer");
    graphContainer.style.display = "none"; // Hide it again if needed
}

    // Clear previous graph and show new graph
    document.getElementById("graphContainer").innerHTML = ""; // Clear previous graph
    document.getElementById("genomegraphContainer").style.display = "block"; // Show graph container
    document.getElementById("genomegraphContainer").style.animation = "fadeIn 0.5s"; // Add fade-in effect
    document.getElementById("genomegraphContainer").classList.remove("hidden");
    drawGraphCytoscape(elements);
}

function drawGraphCytoscape(elements) {
    document.getElementById("graphContainer").innerHTML = "";

    const cy = cytoscape({
        container: document.getElementById("graphContainer"),
        elements: elements,
        style: [
            {
                selector: "node",
                style: {
                    "background-color": "data(color)",
                    "label": "data(label)",
                    "color": "#fff",
                    "text-valign": "center",
                    "text-halign": "center",
                    "font-size": "8px",
                    "width": "20px",
                    "height": "20px",
                    "border-width": 1,
                    "border-color": "#666",
                    "border-opacity": 0.6,
                    "shape": "ellipse",
                    "transition-property": "background-color, border-color",
                    "transition-duration": "0.3s",
                },
            },
            {
                selector: "edge",
                style: {
                    "width": 1,
                    "line-color": "#D3D3D3",  // Light grey color for edges
                    "target-arrow-shape": "triangle",
                    "target-arrow-scale": 0.1,
                    "curve-style": "bezier",
                    "label": "data(label)",
                    "font-size": "8px",
                    "color": "data(color)", // K-mers colorful text
                    "transition-property": "line-color, width, color",
                    "transition-duration": "0.3s",
                },
            },
           {
    selector: "node.highlighted",
    style: {
        "background-color": "#FFFF00",  // Instant yellow highlight
        "color": "#000",  // Black text for contrast
        "border-color": "#FFFF00",  // Yellow border
        "border-width": 3,  // Thicker border
        "transition-property": "none",  // ‚ö° Removes delay
    },
},
{
    selector: "edge.highlighted",
    style: {
        "line-color": "#FF0000",  // Instant red highlight
        "width": 1.5,  // Thicker edge
        "transition-property": "none",  // ‚ö° Removes delay
        "font-size":10,
        
        // üîπ Positioning the Text **Beside the Edge** Instead of Overlapping
       "text-rotation": "autorotate",  // Keeps text aligned with the edge
        "edge-text-rotation": "autorotate",  
        "text-margin-x": 15,  // Moves text further from the edge
        "text-margin-y": -8,  // Adjusts vertical alignment slightly
        "edge-distances": "intersection",  // ‚úÖ Ensures text stays near but clear
    },
},

        ],
        layout: {
            name: "cose",
            fit: true,
            padding: 30,
            animate: true,
            nodeRepulsion: 10000,
            idealEdgeLength: 50,
            edgeElasticity: 200,
        },
    });

    cy.zoomingEnabled(true);
    cy.minZoom(0.5);  // Prevent zooming out too much
    cy.maxZoom(2.5);  // Prevent zooming in too much
    cy.panningEnabled(true);
    cy.center(); // Center the graph
    cy.fit();
    

    // Highlight nodes and edges when clicked
    cy.on('tap', 'node', function(event) {
        cy.elements().removeClass('highlighted'); // Reset previous highlights
        let node = event.target;
        node.addClass('highlighted');
        node.connectedEdges().addClass('highlighted');
    });
}

// Toggle Dropdown Menu
function toggleDropdown() {
    document.getElementById("exportDropdown").classList.toggle("show");
}

// Close dropdown when clicking outside
window.onclick = function(event) {
    if (!event.target.matches('.export-btn')) {
        document.getElementById("exportDropdown").classList.remove("show");
    }
};

// option 1 Step-wise Graph Construction
function exportStepwiseGraph() {
    let sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    let kmerSize = parseInt(document.getElementById("kmerInput").value);

    if (!sequence || isNaN(kmerSize) || kmerSize <= 0 || kmerSize > sequence.length) {
        alert("‚ö†Ô∏è Please enter a valid DNA sequence and K-mer size.");
        return;
    }

    let stepwiseData = `Step-wise De Bruijn Graph Construction\n======================================\n`;
    stepwiseData += `Input DNA Sequence: ${sequence}\n`;
    stepwiseData += `K-mer Size: ${kmerSize}\n\n`;

    stepwiseData += `1. Extract K-mers:\n--------------------\n`;
    let kmerList = [];

    for (let i = 0; i <= sequence.length - kmerSize; i++) {
        let kmer = sequence.substring(i, i + kmerSize);
        kmerList.push(kmer);
        stepwiseData += `   ‚Ä¢ ${kmer}\n`;
    }

    stepwiseData += `\n2. Form Prefix-Suffix Nodes:\n---------------------------\n`;
    let adjacencyList = {};

    for (let kmer of kmerList) {
        let prefix = kmer.slice(0, -1);
        let suffix = kmer.slice(1);

        if (!adjacencyList[prefix]) {
            adjacencyList[prefix] = [];
        }
        adjacencyList[prefix].push(suffix);

        stepwiseData += `   ‚Ä¢ ${kmer} ‚Üí Prefix: ${prefix}, Suffix: ${suffix}\n`;
    }

    stepwiseData += `\n3.  Create De Bruijn Graph:\n--------------------------\n`;
    for (let node in adjacencyList) {
        stepwiseData += `   ${node} ‚Üí ${adjacencyList[node].join(", ")}\n`;
    }

    // üîΩ Generate & Download the Text File
    let blob = new Blob([stepwiseData], { type: "text/plain" });
    let link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "Stepwise_DeBruijn_Graph.txt";
    link.click();
}



//option 2 Function to Download Graph as JPG
function downloadGraphAsImage() {
    let sequence = document.getElementById("sequenceInput").value.trim().toUpperCase();
    let kmerSize = parseInt(document.getElementById("kmerInput").value);

    if (!sequence || isNaN(kmerSize) || kmerSize <= 0 || kmerSize > sequence.length) {
        alert("‚ö†Ô∏è Please enter a valid DNA sequence and K-mer size.");
        return;
    }

    let graphContainer = document.getElementById("graphContainer");

    if (!graphContainer || graphContainer.innerHTML.trim() === "") {
        alert("‚ö†Ô∏è Graph is not available for export! Generate the graph first.");
        return;
    }

    // **Use html2canvas to capture the graph container**
    html2canvas(graphContainer, {
        backgroundColor: "#ffffff", // Ensure white background
        scale: 2 // High-resolution image
    }).then(canvas => {
        let imageURI = canvas.toDataURL("image/jpeg", 1.0); // Convert canvas to JPEG

        // **Create a link and trigger the download**
        let link = document.createElement("a");
        link.href = imageURI;
        link.download = "DeBruijnGraph.jpg";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }).catch(error => {
        console.error("Error capturing graph:", error);
        alert("‚ùå Error exporting the graph. Please try again.");
    });
}


     </script>
 </div>
</body>
</html>
